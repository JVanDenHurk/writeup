<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Basic Pentesting Walkthrough</title>
  <link rel="stylesheet" href="../assets/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <meta name="description" content="Complete walkthrough of the TryHackMe Basic Pentesting room featuring SMB enumeration, SSH brute forcing, SSH key cracking, and privilege escalation techniques.">
  <meta name="keywords" content="basic pentesting, tryhackme, SMB, SSH, hydra, john the ripper, ssh keys, brute force, privilege escalation">
  <meta name="author" content="Justin Van Den Hurk">
</head>
<body>
  <div class="container">
    <header>
      <a href="../" class="back-link">Back to Writeups</a>
      
      <h1>Basic Pentesting Walkthrough</h1>
      <p class="subtitle">Foundational Penetration Testing Techniques</p>
      
      <div class="challenge-info">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
          <span class="text-muted">Published: September 27, 2025</span>
          <span class="text-muted">Difficulty: Easy</span>
        </div>
        <p>Basic Pentesting is a beginner-friendly challenge on <a href="https://tryhackme.com/room/basicpentestingjt" target="_blank" rel="noopener noreferrer">TryHackMe</a> that covers essential penetration testing techniques including network enumeration, SMB exploitation, SSH brute forcing, and SSH private key cracking. Perfect for learning fundamental penetration testing methodologies.</p>
      </div>
    </header>

    <nav id="pre-security-nav">
      <ul class="section-nav">
        <li><a href="#reconnaissance">Reconnaissance</a></li>
        <li><a href="#smb-enumeration">SMB Enumeration</a></li>
        <li><a href="#ssh-brute-force">SSH Brute Force</a></li>
        <li><a href="#ssh-key-cracking">SSH Key Cracking</a></li>
        <li><a href="#privilege-escalation">Privilege Escalation</a></li>
      </ul>
    </nav>

    <main>
      <article>
        <section id="reconnaissance">
          <h2>Reconnaissance Phase</h2>
          
          <div class="level-solution">
            <h3>Network Scanning</h3>
            <p><strong>Objective:</strong> Discover open ports and running services on the target machine.</p>
            
            <p>Start with a comprehensive SYN scan using Nmap:</p>
            <pre><code>sudo nmap -sS &lt;TARGET_IP&gt;</code></pre>
            
            <p>For more detailed information, use:</p>
            <pre><code>sudo nmap -sC -sV -oN detailed_scan.txt &lt;TARGET_IP&gt;</code></pre>
            
            <p>The scan reveals the following open ports:</p>
            <ul>
              <li><strong>Port 22 (SSH):</strong> OpenSSH service</li>
              <li><strong>Port 80 (HTTP):</strong> Apache web server</li>
              <li><strong>Port 139 (NetBIOS-SSN):</strong> NetBIOS Session Service</li>
              <li><strong>Port 445 (Microsoft-DS):</strong> SMB/CIFS service</li>
              <li><strong>Port 8009 (AJP13):</strong> Apache JServ Protocol</li>
              <li><strong>Port 8080 (HTTP-Proxy):</strong> Alternative HTTP service</li>
            </ul>
            
            <p><strong>Key Learnings:</strong></p>
            <p>Multiple services provide various attack vectors. SMB services (ports 139/445) are particularly interesting for information gathering, while SSH and HTTP services offer potential entry points.</p>
          </div>

          <div class="level-solution">
            <h3>Web Directory Enumeration</h3>
            <p><strong>Objective:</strong> Discover hidden directories and files on the web server.</p>
            
            <p>Use Gobuster to enumerate web directories:</p>
            <pre><code>gobuster dir -u http://&lt;TARGET_IP&gt; -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt</code></pre>
            
            <p>Key discovery:</p>
            <ul>
              <li><code>/development/</code> - Development directory with status 301 redirect</li>
            </ul>
            
            <p><strong>Development Directory Analysis:</strong></p>
            <p>Navigate to <code>http://&lt;TARGET_IP&gt;/development/</code> to find development logs and notes.</p>
            
            <p>Key information discovered:</p>
            <ul>
              <li>System running version 2.5.12</li>
              <li>SMB service confirmed</li>
              <li>Apache web server details</li>
              <li>Note that "J has a weak password" - indicating a user with poor password security</li>
            </ul>
            
            <div class="flag-container">
              <strong>Intelligence Gathered: User 'J' has weak password vulnerability</strong>
            </div>
            
            <p><strong>Key Learnings:</strong></p>
            <p>Development directories often contain valuable reconnaissance information including system details, version numbers, and security notes that can guide further attacks.</p>
          </div>
        </section>

        <section id="smb-enumeration">
          <h2>SMB Enumeration</h2>
          
          <div class="level-solution">
            <h3>SMB Share Discovery</h3>
            <p><strong>Objective:</strong> Enumerate SMB shares and identify accessible resources.</p>
            
            <p>Use smbmap to discover available shares with anonymous access:</p>
            <pre><code>smbmap -H &lt;TARGET_IP&gt; -u '' -p ''</code></pre>
            
            <p>Results show:</p>
            <ul>
              <li><strong>Anonymous:</strong> READ ONLY access available</li>
              <li><strong>IPC$:</strong> NO ACCESS (IPC Service for Samba Server 4.15.13-Ubuntu)</li>
            </ul>
            
            <p><strong>Alternative SMB enumeration methods:</strong></p>
            <pre><code># Using enum4linux
enum4linux &lt;TARGET_IP&gt;

# Using smbclient to list shares
smbclient -L //&lt;TARGET_IP&gt; -U '' -N</code></pre>
            
            <p><strong>Key Learnings:</strong></p>
            <p>Anonymous SMB access is a common misconfiguration that can lead to information disclosure. Always test for null session access first.</p>
          </div>

          <div class="level-solution">
            <h3>Anonymous SMB Access</h3>
            <p><strong>Objective:</strong> Access the Anonymous share and extract sensitive information.</p>
            
            <p>Connect to the Anonymous share using smbclient:</p>
            <pre><code>smbclient //&lt;TARGET_IP&gt;/Anonymous -U '' -p ''</code></pre>
            
            <p>When prompted for a password, simply press Enter (leave blank).</p>
            
            <p><strong>SMB Session Commands:</strong></p>
            <pre><code>smb: \&gt; ls</code></pre>
            
            <p>Files discovered:</p>
            <ul>
              <li><code>staff.txt</code> - Contains staff information (173 bytes)</li>
            </ul>
            
            <p>Download the file:</p>
            <pre><code>smb: \&gt; get staff.txt</code></pre>
            
            <p>Exit SMB session and examine the file:</p>
            <pre><code>smb: \&gt; exit
cat staff.txt</code></pre>
            
            <p><strong>Staff.txt Contents Reveal:</strong></p>
            <div class="flag-container">
              <strong>Usernames Discovered: Jan and Kay</strong>
            </div>
            
            <p>Based on the development logs mentioning "J has a weak password" and finding user "Jan", this creates a clear target for password attacks.</p>
            
            <p><strong>Key Learnings:</strong></p>
            <p>SMB shares often contain organizational information like staff lists, which provide usernames for targeted authentication attacks.</p>
          </div>
        </section>

        <section id="ssh-brute-force">
          <h2>SSH Brute Force Attack</h2>
          
          <div class="level-solution">
            <h3>Password Brute Force with Hydra</h3>
            <p><strong>Objective:</strong> Exploit Jan's weak password using automated brute force techniques.</p>
            
            <p>Use Hydra to brute force Jan's SSH password:</p>
            <pre><code>hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://&lt;TARGET_IP&gt;</code></pre>
            
            <p><strong>Alternative Hydra syntax:</strong></p>
            <pre><code># If using compressed wordlist
hydra -l jan -P /usr/share/wordlists/rockyou.txt.gz ssh://&lt;TARGET_IP&gt;

# With verbose output
hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://&lt;TARGET_IP&gt; -v

# Limiting threads to avoid detection
hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://&lt;TARGET_IP&gt; -t 4</code></pre>
            
            <p>Hydra successfully discovers Jan's password:</p>
            
            <div class="flag-container">
              <strong>Jan's Password: armando</strong>
            </div>
            
            <p><strong>SSH Access Verification:</strong></p>
            <pre><code>ssh jan@&lt;TARGET_IP&gt;</code></pre>
            
            <p>Enter password: <code>armando</code></p>
            
            <p><strong>Key Learnings:</strong></p>
            <p>Weak passwords are easily cracked using common wordlists. The rockyou.txt wordlist contains millions of real-world passwords from data breaches, making it highly effective against weak passwords.</p>
          </div>

          <div class="level-solution">
            <h3>Initial System Access</h3>
            <p><strong>Objective:</strong> Establish foothold and perform initial reconnaissance as Jan.</p>
            
            <p>Once connected via SSH, perform basic system enumeration:</p>
            <pre><code># Check current user and privileges
whoami
id

# List home directory contents
ls -la /home/

# Check for other users
cat /etc/passwd | grep -E '/bin/bash|/bin/sh'</code></pre>
            
            <p>Key discoveries:</p>
            <ul>
              <li>Current user: jan</li>
              <li>Other user confirmed: kay</li>
              <li>Standard user privileges (no immediate sudo access)</li>
            </ul>
            
            <div class="flag-container">
              <strong>Second User Confirmed: kay</strong>
            </div>
            
            <p><strong>Key Learnings:</strong></p>
            <p>Initial access often reveals additional users and system information that guide further enumeration and lateral movement attempts.</p>
          </div>
        </section>

        <section id="ssh-key-cracking">
          <h2>SSH Private Key Discovery and Cracking</h2>
          
          <div class="level-solution">
            <h3>SUID Binary Enumeration</h3>
            <p><strong>Objective:</strong> Search for privilege escalation vectors through SUID binaries.</p>
            
            <p>Search for SUID binaries:</p>
            <pre><code>find / -perm -4000 2>/dev/null</code></pre>
            
            <p>After testing various potential exploits without success, pivot to user enumeration and file discovery.</p>
            
            <p><strong>Key Learnings:</strong></p>
            <p>Not all SUID binaries are exploitable. When direct privilege escalation fails, focus on lateral movement and credential discovery.</p>
          </div>

          <div class="level-solution">
            <h3>SSH Key Discovery</h3>
            <p><strong>Objective:</strong> Locate SSH private keys for lateral movement to other users.</p>
            
            <p>Explore Kay's home directory for SSH keys:</p>
            <pre><code># Search for SSH keys in Kay's directory
find /home/kay -name "id_rsa" 2>/dev/null
find /home/kay -name "*.key" 2>/dev/null

# Check the .ssh directory specifically
ls -la /home/kay/.ssh/</code></pre>
            
            <p>Discovery: SSH private key found in Kay's .ssh directory</p>
            
            <p><strong>Copy SSH Key to Your Machine:</strong></p>
            <pre><code># On the target (as Jan)
cat /home/kay/.ssh/id_rsa

# Copy the entire key content to your local machine
# Save as 'kay_id_rsa' locally</code></pre>
            
            <p>Set proper permissions on your local machine:</p>
            <pre><code>chmod 600 kay_id_rsa</code></pre>
            
            <p><strong>Test SSH Key Access:</strong></p>
            <pre><code>ssh -i kay_id_rsa kay@&lt;TARGET_IP&gt;</code></pre>
            
            <p>Result: SSH key is password protected, requiring passphrase cracking.</p>
            
            <p><strong>Key Learnings:</strong></p>
            <p>SSH private keys are often stored with weak or no passphrases. Even when protected, they can be cracked using dictionary attacks.</p>
          </div>

          <div class="level-solution">
            <h3>SSH Key Passphrase Cracking</h3>
            <p><strong>Objective:</strong> Crack the SSH private key passphrase using John the Ripper.</p>
            
            <p>Convert SSH key to John the Ripper format:</p>
            <pre><code>ssh2john kay_id_rsa > kay_id_rsa_hash.txt</code></pre>
            
            <p><strong>Prepare Wordlist (if compressed):</strong></p>
            <pre><code># If rockyou.txt is compressed (common in Kali Linux)
sudo gunzip /usr/share/wordlists/rockyou.txt.gz</code></pre>
            
            <p><strong>Crack the SSH Key:</strong></p>
            <pre><code>sudo john --wordlist=/usr/share/wordlists/rockyou.txt kay_id_rsa_hash.txt</code></pre>
            
            <p>Alternative with specific format:</p>
            <pre><code>john --format=SSH --wordlist=/usr/share/wordlists/rockyou.txt kay_id_rsa_hash.txt</code></pre>
            
            <p>John the Ripper successfully cracks the passphrase:</p>
            
            <div class="flag-container">
              <strong>SSH Key Passphrase: beeswax</strong>
            </div>
            
            <p><strong>Access Kay's Account:</strong></p>
            <pre><code>ssh -i kay_id_rsa kay@&lt;TARGET_IP&gt;</code></pre>
            
            <p>Enter passphrase when prompted: <code>beeswax</code></p>
            
            <p><strong>Key Learnings:</strong></p>
            <p>SSH private keys with weak passphrases are vulnerable to dictionary attacks. John the Ripper's ssh2john utility makes this process straightforward.</p>
          </div>
        </section>

        <section id="privilege-escalation">
          <h2>Final Flag Discovery</h2>
          
          <div class="level-solution">
            <h3>Kay's Home Directory Exploration</h3>
            <p><strong>Objective:</strong> Locate sensitive files and potential flags in Kay's account.</p>
            
            <p>Once logged in as Kay, explore the home directory:</p>
            <pre><code># List all files including hidden ones
ls -la

# Check for backup files
ls -la *.bak
find . -name "*.bak" 2>/dev/null</code></pre>
            
            <p>Discovery: <code>pass.bak</code> file contains sensitive information</p>
            
            <p><strong>Extract Final Flag:</strong></p>
            <pre><code>cat pass.bak</code></pre>
            
            <div class="flag-container">
              <strong>🚩 Final Flag: heresareallystrongpasswordthatfollowsthepasswordpolicy$$</strong>
            </div>
            
            <p><strong>Additional Enumeration:</strong></p>
            <p>While you have Kay's access, perform additional reconnaissance:</p>
            <pre><code># Check sudo privileges
sudo -l

# Look for additional sensitive files
find /home/kay -type f -name "*.txt" -o -name "*.conf" -o -name "*.log"

# Check for cron jobs
crontab -l
ls -la /etc/cron*</code></pre>
            
            <p><strong>Key Learnings:</strong></p>
            <p>Backup files (.bak) often contain sensitive information including passwords, configuration data, and flags. Always check for backup files during enumeration.</p>
          </div>
        </section>

        <section id="summary">
          <h2>Challenge Summary</h2>
          
          <div class="level-solution">
            <h3>Complete Attack Chain</h3>
            <p><strong>Full Penetration Testing Methodology:</strong></p>
            
            <ol>
              <li><strong>Reconnaissance:</strong> Nmap scan revealed multiple services</li>
              <li><strong>Information Gathering:</strong> Web directory enumeration found development notes</li>
              <li><strong>SMB Enumeration:</strong> Anonymous access revealed staff usernames</li>
              <li><strong>Credential Attack:</strong> Brute forced SSH password for user Jan</li>
              <li><strong>Lateral Movement:</strong> Discovered Kay's SSH private key</li>
              <li><strong>Credential Cracking:</strong> Cracked SSH key passphrase</li>
              <li><strong>Flag Extraction:</strong> Found final flag in backup file</li>
            </ol>
            
            <p><strong>Technical Skills Demonstrated:</strong></p>
            <ul>
              <li>Network reconnaissance with Nmap</li>
              <li>Web directory enumeration using Gobuster</li>
              <li>SMB service enumeration and exploitation</li>
              <li>SSH password brute forcing with Hydra</li>
              <li>SSH private key discovery and extraction</li>
              <li>Passphrase cracking with John the Ripper</li>
              <li>File system enumeration and sensitive data discovery</li>
            </ul>
            
            <p><strong>Tools and Techniques Used:</strong></p>
            <ul>
              <li><strong>Nmap:</strong> Network and service discovery</li>
              <li><strong>Gobuster:</strong> Web directory enumeration</li>
              <li><strong>smbmap/smbclient:</strong> SMB share enumeration and access</li>
              <li><strong>Hydra:</strong> SSH password brute forcing</li>
              <li><strong>ssh2john:</strong> SSH key format conversion</li>
              <li><strong>John the Ripper:</strong> Password and passphrase cracking</li>
              <li><strong>Linux commands:</strong> System enumeration and file discovery</li>
            </ul>
            
            <p><strong>Vulnerabilities Identified:</strong></p>
            <ul>
              <li><strong>Information Disclosure:</strong> Development notes revealing system details</li>
              <li><strong>SMB Misconfiguration:</strong> Anonymous read access to sensitive files</li>
              <li><strong>Weak Passwords:</strong> Easily guessable SSH credentials</li>
              <li><strong>SSH Key Security:</strong> Weak passphrase protection</li>
              <li><strong>File Permissions:</strong> Accessible backup files containing sensitive data</li>
            </ul>
            
            <p><strong>Defensive Recommendations:</strong></p>
            <ul>
              <li>Remove or secure development directories from production systems</li>
              <li>Disable anonymous SMB access and implement proper access controls</li>
              <li>Enforce strong password policies and regular password changes</li>
              <li>Use strong passphrases for SSH private keys</li>
              <li>Implement proper file permissions and avoid storing sensitive data in backup files</li>
              <li>Regular security audits and penetration testing</li>
              <li>Network segmentation and access controls</li>
            </ul>
            
            <p><strong>Real-World Applications:</strong></p>
            <p>This challenge demonstrates a typical penetration testing engagement where:</p>
            <ul>
              <li>Multiple attack vectors are explored systematically</li>
              <li>Information gathered in early phases guides later attacks</li>
              <li>Lateral movement is necessary to achieve objectives</li>
              <li>Common misconfigurations provide attack opportunities</li>
              <li>Weak credentials remain a primary attack vector</li>
            </ul>
          </div>
        </section>
      </article>
      
    </main>

    <footer>
      <p>
        Created by <a href="https://www.linkedin.com/in/justin-tom-van-den-hurk/" target="_blank" rel="noopener noreferrer">Justin Van Den Hurk</a>
        • 
        <a href="https://github.com/jvandenhurk" target="_blank" rel="noopener noreferrer">View on GitHub</a>
      </p>
      <p class="text-muted">Last updated: September 2025</p>
      <a class="backtotop" href="#">Back to top</a>
    </footer>
  </div>
</body>
</html>